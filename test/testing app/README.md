# DSA Grinders Time Slot Tester\n\nA sophisticated testing dashboard for debugging the time-slot based messaging system.\n\n## Features\n\n### üïê Real-Time Monitoring\n- **Current Time Display**: Shows local time with second precision\n- **Time Slot Detection**: Displays current 30-minute slot (e.g., \"09:00-09:30\")\n- **User Count**: Shows how many users are in the current time slot\n\n### üéØ Manual Triggers\n- **Pre-Generation**: Trigger `/api/cron/pre-generate` to generate AI messages\n- **Time Slot Sender**: Trigger `/api/cron/time-slot-sender` to send messages\n- **Refresh Users**: Update the user list for current time slot\n- **Clear Results**: Reset the test results log\n\n### üë• User Dashboard\n- **Users in Current Slot**: Detailed table showing:\n  - Name and Email\n  - Daily Grind Time (HH:MM format)\n  - Roast Intensity (mild/medium/savage)\n  - Phone Number for WhatsApp delivery\n\n### üìä Test Results Log\n- **Real-Time Logs**: See API responses and errors\n- **JSON Data Display**: Full response data for debugging\n- **Success/Error Status**: Color-coded results\n- **Timestamps**: When each test was performed\n\n## Setup\n\n1. **Install Dependencies**:\n   ```bash\n   cd \"test/testing app\"\n   npm install\n   ```\n\n2. **Start the Server**:\n   ```bash\n   npm run dev\n   ```\n   This runs on **port 3001** (different from main app on 3000)\n\n3. **Access Dashboard**:\n   Open http://localhost:3001 in your browser\n\n## How to Test\n\n### 1. **Check Current Status**\n- View current time and time slot\n- See how many users should receive messages now\n- Check user details (grind times, roast preferences)\n\n### 2. **Test Pre-Generation**\n- Click \"Trigger Pre-Generation\"\n- This calls the main app's `/api/cron/pre-generate` endpoint\n- Generates AI messages for all roast intensities (mild/medium/savage)\n\n### 3. **Test Time-Slot Sending**\n- Click \"Trigger Time Slot Sender\" \n- This calls the main app's `/api/cron/time-slot-sender` endpoint\n- Sends messages to users whose dailyGrindTime falls in current slot\n\n### 4. **Monitor Results**\n- View success/error responses in the Test Results panel\n- Check JSON data for detailed debugging\n- Clear results when needed\n\n## API Connections\n\nThis tester connects to your main DSA Grinders app on `localhost:3000`:\n\n- **GET http://localhost:3000/api/cron/test-time-slots** - Get current slot info\n- **GET http://localhost:3000/api/cron/pre-generate** - Trigger AI message generation\n- **GET http://localhost:3000/api/cron/time-slot-sender** - Trigger message sending\n\n## Database Connection\n\n**Current**: Uses mock users for testing  \n**Future**: Can be connected to the same Supabase database to show real users\n\n## Time Slot Logic\n\n- **48 slots per day** (30-minute intervals)\n- **Current slot detection**: Based on system time\n- **User matching**: Users whose `dailyGrindTime` falls within current 30-minute window\n- **Batch processing**: Groups users by roast intensity for efficient sending\n\n## Debugging Tips\n\n1. **Check Time Slots**: Verify current slot detection is working\n2. **Monitor User Count**: Should show actual users for current time\n3. **Test Both Endpoints**: Pre-generate first, then send messages\n4. **Watch Logs**: JSON responses show detailed error information\n5. **Refresh Data**: Use refresh button to update user list\n\n---\n\n**Port**: 3001 (separate from main app)  \n**Purpose**: Testing and debugging time-slot messaging system  \n**Database**: Mock data (can be connected to real DB later)